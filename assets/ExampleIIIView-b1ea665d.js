import{_ as k}from"./VCheckBox.vue_vue_type_script_setup_true_lang-86c07675.js";import{d as F,C as I,r as m,f as N,o as r,c as E,w as S,a as n,h as c,s as B,t as y,n as M,D as C,i as U,F as z,x as D,y as T,z as A,_ as P,b as L,p as h,u as g,q as j}from"./index-1886e7ec.js";import{_ as O}from"./VField.vue_vue_type_script_setup_true_lang-001151a9.js";const x=o=>(T("data-v-525e33e3"),o=o(),A(),o),R=x(()=>n("br",null,null,-1)),G=["disabled","for"],H={key:0,class:"spinner-border spinner-border-sm",role:"status"},J=x(()=>n("span",{class:"visually-hidden"},"Loading...",-1)),K=[J],Q={key:1,class:"bi bi-upload"},W=["id","accept","multiple","disabled"],X={key:0,class:"text-sm-start text-danger msg-font"},Y=["onClick"],Z=["onClick"],ee=x(()=>n("em",{class:"bi bi-x-lg me-1"},null,-1)),le=[ee],ae=F({__name:"VUpload",props:{modelValue:{default:()=>[]},accept:{default:"*"},labelArquivo:{default:"Selecionar"},cssClass:{default:I.Primary},max:{default:1},multiple:{type:Boolean,default:!1},size:{default:20*1024*1024},itensForm:{default:()=>new Map},uploadFn:null,downloadFn:null,removeFn:null,label:{default:"Label"},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},failures:{default:()=>[]}},emits:["update:model-value"],setup(o,{emit:d}){const a=o,p=m(),s=m(!1),i=m(null);function _(){p.value=`up_${Math.random().toString().replace(".","_")}`}function b(){i.value=null,s.value=!1}async function w(t){let e=t.target.files;b();let l=[];const u=[];if(e===null)return;if(u.push(...e),(a.modelValue?a.modelValue.length+u.length:u.length)>a.max){i.value=`Máximo de ${a.max} arquivos.`;return}u.forEach(async v=>{if(s.value=!0,a.modelValue&&a.modelValue.find(f=>f.name===v.name)){i.value=`Arquivo "${v.name}" já adicionado.`,s.value=!1;return}if(v.size>a.size){i.value=`O tamanho do arquivo "${v.name}" é maior que o máximo permitido.`,s.value=!1;return}try{const f=await a.uploadFn(v,a.itensForm);l.push({id:f.id,name:v.name})}catch(f){i.value=typeof f=="string"?f:"Erro no upload do arquivo."}finally{d("update:model-value",[...a.modelValue?a.modelValue:[],...l]),s.value=!1}}),t.target.value=""}async function V(t,e){b(),s.value=!0;try{await a.downloadFn(t,e)}catch(l){i.value=typeof l=="string"?l:"Erro no download do arquivo."}finally{s.value=!1}}async function q(t){b(),s.value=!0;try{await a.removeFn(t);const e=a.modelValue.filter(l=>l.id!==t);d("update:model-value",[...e])}catch(e){i.value=typeof e=="string"?e:"Erro ao remover o arquivo."}finally{s.value=!1}}return N(_),(t,e)=>(r(),E(O,{label:o.label,required:o.required,failures:o.failures},{default:S(()=>[R,n("label",{class:M(["btn",`btn-${o.cssClass}`,o.disabled?"label-disabled":""]),disabled:o.disabled,for:p.value},[s.value?(r(),c("div",H,K)):(r(),c("em",Q)),B(" "+y(o.labelArquivo),1)],10,G),n("input",{id:p.value,accept:o.accept,type:"file",multiple:o.multiple,disabled:o.disabled||s.value,onChange:e[0]||(e[0]=l=>w(l))},null,40,W),i.value?(r(),c("p",X,y(i.value),1)):C("",!0),n("ul",null,[(r(!0),c(z,null,U(o.modelValue,(l,u)=>(r(),c("li",{key:u},[n("a",{class:"me-2 link-primary",href:"#",onClick:D($=>V(l.id,l.name),["prevent"])},y(l.name),9,Y),o.disabled?C("",!0):(r(),c("span",{key:0,class:"delete-file",onClick:$=>q(l.id)},le,8,Z))]))),128))])]),_:1},8,["label","required","failures"]))}});const oe=P(ae,[["__scopeId","data-v-525e33e3"]]),te={class:"container"},se=n("p",null,"Exemplo de componentes III - Upload",-1),ne={class:"row"},ie={class:"col-2"},ue={class:"col"},re={class:"col"},de=n("p",null,"uploado files:",-1),fe=F({__name:"ExampleIIIView",setup(o){const d=m(!1),a=m(!1),p={with:["error one","error two"],without:[]},s=m(!1),i=L(()=>s.value?"with":"without"),_=m([{id:"abc123456",name:"arquivo01.pdf"},{id:"abc123987",name:"arquivo02.pdf"}]),b=new Map([["className","Documentos"],["documentTitle","arquivo"]]);function w(t,e){return console.log("upload",{file:t,data:e}),new Promise((l,u)=>{try{setTimeout(()=>l({id:Math.random().toString().replace(".","_"),name:t.name}),3e3)}catch{u("Não foi possível enviar o arquivo!")}})}function V(t,e){return new Promise((l,u)=>{try{setTimeout(()=>l(console.log("download",{identificador:t,nome:e})),3e3)}catch{u("Não foi possível baixar o arquivo!")}})}function q(t){return console.log("remove",t),new Promise((e,l)=>{try{setTimeout(()=>e(console.log("remove",{identificador:t})),3e3)}catch{l("Não foi possível remover o arquivo!")}})}return(t,e)=>(r(),c("div",te,[se,n("div",ne,[n("div",ie,[h(k,{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=l=>d.value=l),label:"Requerido",description:d.value?"Sim":"Não"},null,8,["modelValue","description"]),h(k,{modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),label:"Desabilitado",description:a.value?"Sim":"Não"},null,8,["modelValue","description"]),h(j,{color:g(I).Danger,label:"Erro?",onClick:e[2]||(e[2]=l=>s.value=!s.value)},null,8,["color"])]),n("div",ue,[h(oe,{modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=l=>_.value=l),label:"Arquivos",max:4,"itens-form":g(b),"download-fn":V,"upload-fn":w,"remove-fn":q,required:d.value,disabled:a.value,failures:p[g(i)]},null,8,["modelValue","itens-form","required","disabled","failures"])]),n("div",re,[de,n("pre",null,y(_.value),1)])])]))}});export{fe as default};
